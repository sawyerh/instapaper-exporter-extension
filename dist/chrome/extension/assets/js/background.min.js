!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t){"use strict";function n(e){var t=['<html><head>\n    <meta charset="utf-8">\n    <title>Instapaper Highlights Export</title>\n    <style type="text/css"> \n      body {\n        max-width: 800px;\n        margin: 50px auto;\n        line-height: 1.4;\n      }\n      h1 {\n        margin: 50px 0 1em;\n      }\n      h2 {\n        font-size: 1em;\n        font-weight: normal;\n        margin: 3em 0 1em;\n      }\n      blockquote {\n        background: #FFFCEE;\n        padding: 15px;\n        margin: 0 0 10px;\n        display: block;\n        font-size: 1.2em;\n      }\n      code {\n        background: #F7F7F7;\n        padding: 10px;\n      }\n      .json-export {\n        width: 100%;\n        font-family: monospace;\n      }\n      .roam-export {\n        width: 100%;\n        font-family: monospace;\n      }\n    </style>\n  </head><body>\n  <a href="#html">HTML</a> &bull; <a href="#json">JSON</a> &bull; <a href="#roam">Roam</a>\n  <hr />\n  Extension by <a href="http://www.sawyerh.com">Sawyer Hollenshead</a>\n  <hr />\n  <h1 id="html">HTML Export</h1>'];e.forEach(function(e){var n='<h2><a href="'+e.source+'" class="title">'+e.title+'</a></h2>\n                <blockquote class="highlight">'+e.highlight+"</blockquote>";e.note&&(n+='<small class="note"><strong>Note:</strong> '+e.note+"</small>"),t.push(n)}),t.push('<h1 id="json">JSON Export</h1><textarea class="json-export" rows="10">'+JSON.stringify(e)+"</textarea>"),t.push("</body></html>"),t.push('<h1 id="roam">Roam Export</h1><textarea class="roam-export" rows="10">');var n={};e.forEach(function(e){if(n[e.source]||(n[e.source]={entry:e,text:""}),e.highlight){var t="",o=e.highlight.trim().split(/\n+/);t=1===o.length?"  - "+o[0]:"  - "+o[0]+"\n"+o.slice(1).map(function(e){return"    - "+e+"\n"}).join(""),n[e.source].text+=t+"\n"+(e.note?"    - ^^"+e.note+"^^ #n\n":"")}else e.note&&(n[e.source].text+="  - ^^"+e.note+"^^ #n")}),Object.keys(n).forEach(function(e){t.push("- [["+n[e].entry.title+"]] - [link]("+n[e].entry.source+") #instapaper\n"+n[e].text)}),t.push("</textarea></body></html>");var r=new Blob(t,{type:"text/html"}),a=r.size+512,i="instapaper_highlights_export-"+Date.now()+".html",s=window.requestFileSystem||window.webkitRequestFileSystem;s(window.TEMPORARY,a,function(e){e.root.getFile(i,{create:!0},function(e){e.createWriter(function(e){e.onwriteend=o.bind(null,i),e.write(r)})})})}function o(e){var t="filesystem:chrome-extension://"+chrome.i18n.getMessage("@@extension_id")+"/temporary/"+e;chrome.downloads.download({filename:e,url:t,saveAs:!0})}function r(e){chrome.tabs.sendMessage(e.id,{message:"scrape_page"})}function a(e){chrome.tabs.query({active:!0,currentWindow:!0},function(e){var t=e[0];t.url.indexOf("instapaper.com/notes")>=0?r(t):chrome.tabs.create({url:"https://instapaper.com/notes"},i)})}function i(e){l=window.setInterval(function(){chrome.tabs.get(e.id,function(t){"complete"===t.status&&(r(e),window.clearInterval(l))})},100)}function s(e){"install"===e.reason&&chrome.tabs.create({url:"https://github.com/sawyerh/instapaper-exporter-extension/blob/master/README.md"})}function h(e,t,o){"save_highlights"===e.message&&n(e.highlights)}var l=void 0;chrome.browserAction.onClicked.addListener(a),chrome.runtime.onMessage.addListener(h),chrome.runtime.onInstalled&&chrome.runtime.onInstalled.addListener(s)}]);